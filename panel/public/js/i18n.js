const translations = {
  en: {
    serverPanel: 'Server Panel',
    online: 'ONLINE',
    offline: 'OFFLINE',
    console: 'Console',
    enterCommand: 'Enter command...',
    send: 'SEND',
    setup: 'Setup',
    files: 'Files',
    commands: 'Commands',
    control: 'Control',
    checking: 'Checking...',
    filesReady: 'Files ready',
    missingFiles: 'Missing files',
    downloadFiles: 'Download Files',
    redownload: 'Re-download',
    downloadHint: 'Downloads ~2GB from Hytale',
    credentialsSaved: '✓ Credentials saved',
    noCredentials: '○ No credentials',
    authRequired: 'Auth Required',
    openLink: 'Open link:',
    code: 'Code:',
    starting: 'Starting...',
    waitingAuth: 'Waiting auth...',
    waiting: 'Waiting...',
    downloading: 'Downloading...',
    extracting: 'Extracting...',
    done: 'Done!',
    error: 'Error',
    auth: 'Auth',
    download: 'Download',
    extract: 'Extract',
    login: 'Login',
    status: 'Status',
    saveCreds: 'Save Creds',
    server: 'Server',
    allCommands: 'All Commands',
    stop: 'Stop',
    start: 'START',
    restart: 'RESTART',
    stopServer: 'STOP SERVER',
    wipeData: 'WIPE DATA',
    unknown: 'Unknown',
    game: 'Game',
    panel: 'Panel',
    confirmRestart: 'Restart?',
    confirmStop: 'Stop?',
    confirmWipe: 'DELETE ALL DATA?',
    confirmWipeSure: 'SURE?',
    refresh: 'Refresh',
    newFolder: '+ Dir',
    upload: 'Upload',
    dropFilesHere: 'Drop files here',
    uploadHint: 'Max 100MB | .jar .zip .json .yaml',
    uploading: 'Uploading',
    name: 'Name',
    size: 'Size',
    loading: 'Loading...',
    emptyDir: 'Empty directory',
    errorLoading: 'Error loading',
    back: '(back)',
    edit: 'Edit',
    folderName: 'Folder name:',
    backup: 'Backup',
    save: 'Save',
    close: 'Close',
    ready: 'Ready',
    saving: 'Saving...',
    saved: 'Saved',
    savedWithBackup: 'Saved (backup created)',
    cannotEditBinary: 'Cannot edit binary file',
    fileSaved: 'File saved',
    saveFailed: 'Save failed',
    folderCreated: 'Folder created',
    deleted: 'Deleted',
    renamed: 'Renamed',
    uploaded: 'Uploaded',
    uploadFailed: 'Failed',
    uploadError: 'Upload error',
    confirmDelete: 'Delete',
    restarted: 'Restarted',
    stopped: 'Stopped',
    started: 'Started',
    dataWiped: 'Data wiped!',
    failed: 'failed',
    downloadComplete: 'Download complete!',
    filesReadyMsg: '✓ Files ready!',
    // Mods
    mods: 'Mods',
    configured: 'Configured',
    notConfigured: 'Not configured',
    apiKeySaved: 'API key saved',
    enterApiKey: 'Enter API key',
    configureApiFirst: 'Configure API key first',
    searchForMods: 'Search for mods',
    searching: 'Searching...',
    searchError: 'Search failed',
    noModsFound: 'No mods found',
    noModsInstalled: 'No mods installed',
    install: 'Install',
    installed: 'Installed',
    installing: 'Installing...',
    modInstalled: 'Mod installed!',
    installFailed: 'Install failed',
    remove: 'Remove',
    modUninstalled: 'Mod removed',
    enable: 'Enable',
    disable: 'Disable',
    modEnabled: 'Mod enabled',
    modDisabled: 'Mod disabled',
    confirmUninstall: 'Remove this mod?',
    noVersionAvailable: 'No version available',
    page: 'Page',
    browse: 'Browse',
    search: 'Search',
    local: 'Local',
    updates: 'Updates',
    update: 'Update',
    updateAvailable: 'Update available',
    updatesAvailable: '{count} update(s) available',
    noUpdates: 'All mods are up to date',
    modUpdated: 'Mod updated!',
    updateFailed: 'Update failed',
    prev: 'Prev',
    next: 'Next',
    allTypes: 'All Types',
    typePlugin: 'Plugins',
    typeData: 'Data',
    typeArt: 'Art',
    typeSave: 'Saves',
    typeModpack: 'Modpacks',
    checkUpdates: 'Updates'
  },
  es: {
    serverPanel: 'Panel de Servidor',
    online: 'EN LÍNEA',
    offline: 'DESCONECTADO',
    console: 'Consola',
    enterCommand: 'Ingresa un comando...',
    send: 'ENVIAR',
    setup: 'Configuración',
    files: 'Archivos',
    commands: 'Comandos',
    control: 'Control',
    checking: 'Verificando...',
    filesReady: 'Archivos listos',
    missingFiles: 'Archivos faltantes',
    downloadFiles: 'Descargar Archivos',
    redownload: 'Re-descargar',
    downloadHint: 'Descarga ~2GB desde Hytale',
    credentialsSaved: '✓ Credenciales guardadas',
    noCredentials: '○ Sin credenciales',
    authRequired: 'Auth Requerida',
    openLink: 'Abrir enlace:',
    code: 'Código:',
    starting: 'Iniciando...',
    waitingAuth: 'Esperando auth...',
    waiting: 'Esperando...',
    downloading: 'Descargando...',
    extracting: 'Extrayendo...',
    done: '¡Listo!',
    error: 'Error',
    auth: 'Auth',
    download: 'Descarga',
    extract: 'Extraer',
    login: 'Iniciar',
    status: 'Estado',
    saveCreds: 'Guardar',
    server: 'Servidor',
    allCommands: 'Todos los Comandos',
    stop: 'Detener',
    start: 'INICIAR',
    restart: 'REINICIAR',
    stopServer: 'DETENER SERVIDOR',
    wipeData: 'BORRAR DATOS',
    unknown: 'Desconocido',
    game: 'Juego',
    panel: 'Panel',
    confirmRestart: '¿Reiniciar?',
    confirmStop: '¿Detener?',
    confirmWipe: '¿BORRAR TODOS LOS DATOS?',
    confirmWipeSure: '¿SEGURO?',
    refresh: 'Actualizar',
    newFolder: '+ Carpeta',
    upload: 'Subir',
    dropFilesHere: 'Arrastra archivos aquí',
    uploadHint: 'Máx 100MB | .jar .zip .json .yaml',
    uploading: 'Subiendo',
    name: 'Nombre',
    size: 'Tamaño',
    loading: 'Cargando...',
    emptyDir: 'Carpeta vacía',
    errorLoading: 'Error al cargar',
    back: '(volver)',
    edit: 'Editar',
    folderName: 'Nombre de carpeta:',
    backup: 'Respaldo',
    save: 'Guardar',
    close: 'Cerrar',
    ready: 'Listo',
    saving: 'Guardando...',
    saved: 'Guardado',
    savedWithBackup: 'Guardado (respaldo creado)',
    cannotEditBinary: 'No se puede editar archivo binario',
    fileSaved: 'Archivo guardado',
    saveFailed: 'Error al guardar',
    folderCreated: 'Carpeta creada',
    deleted: 'Eliminado',
    renamed: 'Renombrado',
    uploaded: 'Subido',
    uploadFailed: 'Falló',
    uploadError: 'Error al subir',
    confirmDelete: 'Eliminar',
    restarted: 'Reiniciado',
    stopped: 'Detenido',
    started: 'Iniciado',
    dataWiped: '¡Datos borrados!',
    failed: 'falló',
    downloadComplete: '¡Descarga completa!',
    filesReadyMsg: '✓ ¡Archivos listos!',
    username: 'Usuario',
    password: 'Contraseña',
    logout: 'Salir',
    sessionExpired: 'Sesión expirada. Inicia sesión nuevamente.',
    defaultCredsWarning: '⚠️ Usando credenciales por defecto. Configura PANEL_USER y PANEL_PASS.',
    // Mods
    mods: 'Mods',
    configured: 'Configurado',
    notConfigured: 'No configurado',
    apiKeySaved: 'Clave API guardada',
    enterApiKey: 'Ingresa clave API',
    configureApiFirst: 'Configura la clave API primero',
    searchForMods: 'Buscar mods',
    searching: 'Buscando...',
    searchError: 'Error en búsqueda',
    noModsFound: 'No se encontraron mods',
    noModsInstalled: 'No hay mods instalados',
    install: 'Instalar',
    installed: 'Instalado',
    installing: 'Instalando...',
    modInstalled: '¡Mod instalado!',
    installFailed: 'Error al instalar',
    remove: 'Eliminar',
    modUninstalled: 'Mod eliminado',
    enable: 'Activar',
    disable: 'Desactivar',
    modEnabled: 'Mod activado',
    modDisabled: 'Mod desactivado',
    confirmUninstall: '¿Eliminar este mod?',
    noVersionAvailable: 'Sin versión disponible',
    page: 'Página',
    browse: 'Explorar',
    search: 'Buscar',
    local: 'Local',
    updates: 'Actualizaciones',
    update: 'Actualizar',
    updateAvailable: 'Actualización disponible',
    updatesAvailable: '{count} actualización(es) disponible(s)',
    noUpdates: 'Todos los mods están actualizados',
    modUpdated: '¡Mod actualizado!',
    updateFailed: 'Error al actualizar',
    prev: 'Ant',
    next: 'Sig',
    allTypes: 'Todos',
    typePlugin: 'Plugins',
    typeData: 'Datos',
    typeArt: 'Arte',
    typeSave: 'Guardados',
    typeModpack: 'Modpacks',
    checkUpdates: 'Actualizaciones'
  },
  uk: {
    serverPanel: 'Панель сервера',
    online: 'ОНЛАЙН',
    offline: 'ОФЛАЙН',
    console: 'Консоль',
    enterCommand: 'Введіть команду...',
    send: 'НАДІСЛАТИ',
    setup: 'Налаштування',
    files: 'Файли',
    commands: 'Команди',
    control: 'Керування',
    checking: 'Перевірка...',
    filesReady: 'Файли готові',
    missingFiles: 'Відсутні файли',
    downloadFiles: 'Завантажити файли',
    redownload: 'Перезавантажити',
    downloadHint: 'Завантажує ~2ГБ з Hytale',
    credentialsSaved: '✓ Облікові дані збережено',
    noCredentials: '○ Немає облікових даних',
    authRequired: 'Потрібна авторизація',
    openLink: 'Відкрийте посилання:',
    code: 'Код:',
    starting: 'Запуск...',
    waitingAuth: 'Очікування авторизації...',
    waiting: 'Очікування...',
    downloading: 'Завантаження...',
    extracting: 'Розпакування...',
    done: 'Готово!',
    error: 'Помилка',
    auth: 'Авторизація',
    download: 'Завантаження',
    extract: 'Розпакування',
    login: 'Увійти',
    status: 'Статус',
    saveCreds: 'Зберегти',
    server: 'Сервер',
    allCommands: 'Усі команди',
    stop: 'Стоп',
    start: 'СТАРТ',
    restart: 'РЕСТАРТ',
    stopServer: 'ЗУПИНИТИ СЕРВЕР',
    wipeData: 'ОЧИСТИТИ ДАНІ',
    unknown: 'Невідомо',
    game: 'Гра',
    panel: 'Панель',
    confirmRestart: 'Перезапустити?',
    confirmStop: 'Зупинити?',
    confirmWipe: 'ВИДАЛИТИ ВСІ ДАНІ?',
    confirmWipeSure: 'ВПЕВНЕНІ?',
    refresh: 'Оновити',
    newFolder: '+ Папка',
    upload: 'Завантажити',
    dropFilesHere: 'Перетягніть файли сюди',
    uploadHint: 'Макс 100МБ | .jar .zip .json .yaml',
    uploading: 'Завантаження',
    name: 'Назва',
    size: 'Розмір',
    loading: 'Завантаження...',
    emptyDir: 'Порожня папка',
    errorLoading: 'Помилка завантаження',
    back: '(назад)',
    edit: 'Редагувати',
    folderName: 'Назва папки:',
    backup: 'Резервна копія',
    save: 'Зберегти',
    close: 'Закрити',
    ready: 'Готово',
    saving: 'Збереження...',
    saved: 'Збережено',
    savedWithBackup: 'Збережено (створено резервну копію)',
    cannotEditBinary: 'Неможливо редагувати бінарний файл',
    fileSaved: 'Файл збережено',
    saveFailed: 'Помилка збереження',
    folderCreated: 'Папку створено',
    deleted: 'Видалено',
    renamed: 'Перейменовано',
    uploaded: 'Завантажено',
    uploadFailed: 'Помилка',
    uploadError: 'Помилка завантаження',
    confirmDelete: 'Видалити',
    restarted: 'Перезапущено',
    stopped: 'Зупинено',
    started: 'Запущено',
    dataWiped: 'Дані очищено!',
    failed: 'помилка',
    downloadComplete: 'Завантаження завершено!',
    filesReadyMsg: '✓ Файли готові!',
    // Mods
    mods: 'Моди',
    configured: 'Налаштовано',
    notConfigured: 'Не налаштовано',
    apiKeySaved: 'API ключ збережено',
    enterApiKey: 'Введіть API ключ',
    configureApiFirst: 'Спочатку налаштуйте API ключ',
    searchForMods: 'Пошук модів',
    searching: 'Пошук...',
    searchError: 'Помилка пошуку',
    noModsFound: 'Моди не знайдено',
    noModsInstalled: 'Моди не встановлено',
    install: 'Встановити',
    installed: 'Встановлено',
    installing: 'Встановлення...',
    modInstalled: 'Мод встановлено!',
    installFailed: 'Помилка встановлення',
    remove: 'Видалити',
    modUninstalled: 'Мод видалено',
    enable: 'Увімкнути',
    disable: 'Вимкнути',
    modEnabled: 'Мод увімкнено',
    modDisabled: 'Мод вимкнено',
    confirmUninstall: 'Видалити цей мод?',
    noVersionAvailable: 'Немає доступної версії',
    page: 'Сторінка',
    browse: 'Огляд',
    search: 'Пошук',
    local: 'Локальний',
    updates: 'Оновлення',
    update: 'Оновити',
    updateAvailable: 'Доступне оновлення',
    updatesAvailable: 'Доступно {count} оновлень',
    noUpdates: 'Усі моди оновлені',
    modUpdated: 'Мод оновлено!',
    updateFailed: 'Помилка оновлення',
    prev: 'Назад',
    next: 'Далі',
    allTypes: 'Усі типи',
    typePlugin: 'Плагіни',
    typeData: 'Дані',
    typeArt: 'Арт',
    typeSave: 'Збереження',
    typeModpack: 'Збірки',
    checkUpdates: 'Оновлення'
  }
};

let currentLang = localStorage.getItem('hytale-panel-lang') || 'en';

function t(key) {
  return translations[currentLang][key] || translations.en[key] || key;
}

function translateDataAttributes() {
  // Translate all elements with data-i18n attribute
  document.querySelectorAll('[data-i18n]').forEach(el => {
    el.textContent = t(el.dataset.i18n);
  });

  // Translate placeholders
  document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
    el.placeholder = t(el.dataset.i18nPlaceholder);
  });
}

function setLanguage(lang) {
  currentLang = lang;
  localStorage.setItem('hytale-panel-lang', lang);
  document.body.setAttribute('data-lang', lang);

  const langSelect = document.getElementById('lang-select');
  if (langSelect) langSelect.value = lang;

  if (typeof updateAllTranslations === 'function') {
    updateAllTranslations();
  }
}

function getLang() {
  return currentLang;
}
