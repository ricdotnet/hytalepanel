# HytalePanel for ZimaOS / CasaOS
# Servers are created dynamically from the Dashboard
#
# Usage: docker compose -f docker-compose.casaos.yml up -d
#
# NOTE: This uses a Docker volume for CasaOS compatibility.
# For direct file access, use the regular docker-compose.yml with HOST_DATA_PATH

services:
  panel:
    image: ketbom/hytale-panel:latest
    container_name: hytale-panel
    restart: unless-stopped
    ports:
      - "${PANEL_PORT:-3000}:${PANEL_PORT:-3000}"
    environment:
      TZ: ${TZ:-UTC}
      PANEL_PORT: ${PANEL_PORT:-3000}
      PANEL_USER: ${PANEL_USER:-admin}
      PANEL_PASS: ${PANEL_PASS:-admin}
      JWT_SECRET: ${JWT_SECRET:-}
      MODTALE_API_KEY: ${MODTALE_API_KEY:-}
      CURSEFORGE_API_KEY: ${CURSEFORGE_API_KEY:-}
      DISABLE_AUTH: ${DISABLE_AUTH:-false}
      BASE_PATH: ${BASE_PATH:-}
      HOST_DATA_PATH: /DATA/AppData/hytale-panel
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - /DATA/AppData/hytale-panel:/opt/hytale-panel/data
      # NOTE: /etc/machine-id not mounted for ZimaOS/CasaOS compatibility
      # Each server container will generate its own machine-id
